#!/bin/bash

set -eu

SLICER_FILENAME=Slicer-4.11.20210226-linux-amd64
SLICER_SHA256=12b68e3717f1d0800a52578b686d3abc6b2159855fcbe8f3a2055ca050ddb09a

# useful url
curl -sfL https://download.slicer.org/bitstream/60add706ae4540bf6a89bf98 \
    -o $SLICER_FILENAME.tar.gz

echo "${SLICER_SHA256} ${SLICER_FILENAME}.tar.gz" |sha256sum -c -

sudo tar zxvf ${SLICER_FILENAME}.tar.gz -C /usr/local/

cat <<EOF > ~/Desktop/Slicer.desktop
[Desktop Entry]
Name=Slicer 4.11
GenericName=Slicer
Terminal=false
Exec=/usr/local/${SLICER_FILENAME}/Slicer
Icon=/usr/local/${SLICER_FILENAME}/icon.svg
Type=Application
EOF
chmod +x ~/Desktop/Slicer.desktop

cat <<EOF | sudo tee /usr/local/${SLICER_FILENAME}/icon.svg > /dev/null
<svg width="513" height="512" viewBox="0 0 513 512" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M501.3 245.6V168.2H426.7V93.7H351.9V19L290.5 18.8L274.5 19C274.5 19 270.2 2.7 230.9 6C104.4 19 5.69995 126 5.69995 256C5.69995 394.8 118.2 507.4 257.1 507.4C386.9 507.4 493.8 409 507.1 282.7C509.3 254.7 501.3 245.6 501.3 245.6Z" fill="black"/>
<path d="M260.8 348.8C232.4 348.8 198.1 345.5 172.9 342.2C169.2 314.6 168.3 284.6 168.3 253C168.3 125.8 201.4 20.9 243.5 11.1C115.8 18.1 14.4 124.8 14.4 255.5C14.4 390.7 122.9 500.3 256.8 500.3C386.1 500.3 491.7 398.1 498.8 269.3C492.2 314.3 385.9 348.8 260.8 348.8Z" fill="#AFB8D1"/>
<path d="M424.8 339.9C423.8 340.2 422.8 340.5 421.8 340.8C394.8 412.3 332.6 466.2 258.4 485.5C259.3 485.5 260.2 485.5 261.1 485.5C317 485.5 370.7 465.4 412.2 428.9C447.5 397.8 471.5 357.1 481.3 312.4C468 322.9 449 332.2 424.8 339.9Z" fill="#909CAF"/>
<path d="M269.1 34.1C268.5 19.8 257.3 16.2 251.9 16C235.1 15.5 214.8 39.2 200 84.4C185 129.9 168.5 206.9 180.3 337.5L212.7 306.1C212.7 306.1 212.5 303.6 212.3 301.1C212.3 301.1 209.8 269.6 209.4 253.5C208.5 204.7 212.7 159.1 223.1 124.5C233.5 89.8 252.7 60.3 267.6 60.3C272.8 60.3 272.8 72.7 277.6 77.2L269.1 34.1Z" fill="#626E7F"/>
<path d="M425.8 319.6C453.7 309.8 513.2 283.2 487.9 243.6C486.4 241.2 484.5 239.1 482.2 237.4H434.8C440.7 243 443.7 248.9 443.7 254.9C443.7 269.8 425.2 283.8 391.6 294.2C358.2 304.6 313.8 310.3 266.6 310.3C248.546 310.3 230.573 308.986 212.695 306.105L180.306 337.491C196.006 339.491 233.6 343.1 265 343.1C325.5 343.1 382.6 334.7 425.8 319.6Z" fill="#AFB8D2"/>
<path d="M268.6 66.4C243 66.4 215.6 138.8 215.6 246.6C215.6 263.2 217.1 284.9 218.4 300.8L286.849 233.412L286.6 73.5C281.7 68.3 273.6 66.4 268.6 66.4Z" fill="#BCC9CB"/>
<path d="M268 306.3C253.7 306.3 223.412 303.456 218.398 300.779L284.853 235.4L434.4 235.4C438.4 239.8 440.3 246.9 440.1 253C439.683 265.726 424.671 279.089 401.2 287.5C369.88 298.724 321.01 306.3 274.2 306.3C272.2 306.3 270.2 306.3 268 306.3Z" fill="#E6ECED"/>
<path d="M491.236 251.351C492.277 278.282 471.392 304.015 432.558 317.127C364.674 340.125 297.597 343.958 253.316 343.05C222.955 342.445 198.847 339.621 185.129 337.604L215.087 308.654C229.208 310.571 251.601 311.983 268.446 311.983C270.766 311.983 272.884 311.983 274.801 311.882C323.318 310.571 367.801 304.115 400.179 293.726C415.31 288.884 428.12 282.328 437.299 274.662C445.873 267.399 450.815 259.532 451.017 252.37C451.219 244.402 448.495 237.543 442.846 231.995L442.443 231.591L287.106 231.692L286.804 73.2288C286.804 72.3209 286.501 71.514 285.896 70.8079C280.449 65.0585 271.573 59.8133 265.117 59.8133C250.29 59.8133 236.168 81.1973 225.375 115.089C214.28 149.989 208.127 197.095 208.127 247.831C208.127 265.685 209.842 288.481 210.75 299.98L173.731 335.687C173.731 335.687 170.913 342.716 170.402 345.169C171.714 345.471 203.89 351.927 252.811 352.935C257.048 353.036 261.183 353.036 265.42 353.036C289.83 353.036 314.139 351.523 337.641 348.598C372.138 344.261 405.122 336.897 435.786 326.508C458.279 318.842 475.427 308.755 486.623 296.449C496.508 285.556 503.171 266.582 501.222 252.057L491.236 251.351ZM441.031 252.168C440.93 256.304 437.097 261.953 430.843 267.198C422.673 274.057 411.073 280.008 397.053 284.446C365.481 294.533 321.906 300.787 274.397 302.098C256.342 302.199 234.857 301.493 223.358 300.585L284.585 241.577L437.904 241.476C440.224 244.502 441.233 247.932 441.031 252.168ZM215.087 247.831C215.087 133.043 244.338 69.7992 264.714 69.7992C269.152 69.7992 275.608 71.1105 279.642 74.6409L279.945 232.802L267.942 244.603L217.306 293.625C216.297 281.521 215.087 262.86 215.087 247.831Z" fill="black"/>
<path d="M342 28.7H277.1V93.6H342V28.7Z" fill="#F7BF21"/>
<path d="M342 103.2H277.1V168.1H342V103.2Z" fill="#129A68"/>
<path d="M416.8 103.2H351.9V168.1H416.8V103.2Z" fill="#F26B31"/>
<path d="M491.5 178.1H426.6V243H491.5V178.1Z" fill="#1F65B0"/>
<path d="M342 178.1H277.1V243H342V178.1Z" fill="#EE3128"/>
<path d="M416.8 178.1H351.9V243H416.8V178.1Z" fill="#CF582C"/>
<path d="M501.3 168.2H426.6V93.7H351.8V19H267.7L267.7 251V252.276L501.3 252.5V168.2ZM342 242.8H277.5V178H342V242.8ZM342 168.3H277.5V103.1H342V168.3ZM342 93.5H277.5V28.6H342V93.5ZM416.8 242.8H351.6V178H416.8V242.8ZM416.8 168.3H351.6V103.1H416.8V168.3ZM491.5 242.8H426.6V178H491.5V242.8Z" fill="black"/>
</svg>
EOF
